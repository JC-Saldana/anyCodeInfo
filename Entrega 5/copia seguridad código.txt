package v1;
import java.time.LocalDateTime;
import java.time.Month;

public class Fiesta {
	
	//----------- Atributos ---------------
	
	private String tipo;     //Tipo de fiesta: infantil, cumpleaños, disfraces, etc.
	private LocalDateTime fechaHora;
	private String dirección;
	private int bebidas;     //Cantidad de bebidas para comprar
	private int bocadillos;  //Cantidad de bocadillos para comprar
	private int invitados;   //Número de invitados
	private int presMin;     //Presupuesto mínimo para fiesta
	private int presMax;	 //Presupuesto máximo para fiesta
	
	//------------- Métodos ---------------
	

	//Imprime todos los datos de la fiesta
	private String consultar() {
		return ("Tipo: " + getTipo() + "\n" + "Fecha y Hora: " + getFechaHora() + "\n" +
				"Dirección: " + getDirección() + "\n" + "Bebidas: " + getBebidas() + "\n" +
				"Bocadillos: " + getBocadillos() + "\n" + "Invitados: " + getInvitados() + "\n");
	}
	//Añade un invitado a la fiesta
	private void invitar() {
		int n = this.getInvitados() + 1;
		this.setInvitados(n);
	}
	//Expulsa un invitado de la fiesta
	private void cancelarInvitación() {
		int n = this.getInvitados() - 1;
		this.setInvitados(n);
	}
	//Indica el precio de la fiesta
	private double precioFiesta() {
		int precioTotal = (invitados*5 + bebidas*2 + bocadillos * 3);
		return (precioTotal);
	}
	//Ajusta precio fiesta a límite entre presMin y presMax
	private void ajustaPrecio() {
		if (precioFiesta() > this.getPresMax()) {
			System.out.println(reducirCoste());
		}
		if (precioFiesta() < this.getPresMin()) {
			System.out.println(despilfarrar());
		}
	}
	//Baja precio fiesta para ajustarse a presupuesto máximo establecido
	private String reducirCoste() {
		while(this.precioFiesta() > this.getPresMax() && invitados !=0) { 
		   	  
			  if (this.getInvitados() > 1) {
				  this.cancelarInvitación();
			  }
			  if (this.getBebidas() > 10) {
				  this.setBebidas(this.getBebidas() - 2);
			  }
			  if (this.getBocadillos() > 5) {
				  this.setBocadillos(this.getBocadillos() - 3);
			  }
			  this.precioFiesta();
		} return "\"Se han retirado bebidas y bocadillos para ajustarse al presupuesto\"";
	}
	//Sube precio fiesta hasta presupuesto mínimo establecido
	private String despilfarrar() {
		while(this.precioFiesta() < this.getPresMin() && invitados !=0) { 
			this.invitar();
			this.setBebidas(getBebidas() + 2);
			this.setBocadillos(getBocadillos() + 3);
			this.precioFiesta();
		} return "Se han añadido invitados con sus bebidas y bocadillos hasta presupuesto mínimo";
	}
	
	//-------------- Get y Set -------------
	
	public String getTipo() {
		return tipo;
	}
	public LocalDateTime getFechaHora() {
		return fechaHora;
	}
	public String getDirección() {
		return dirección;
	}
	public int getBebidas() {
		return bebidas;
	}
	public int getBocadillos() {
		return bocadillos;
	}
	public int getInvitados() {
		return invitados;
	}
	public int getPresMin() {
		return presMin;
	}
	public int getPresMax() {
		return presMax;
	}
	public void setTipo(String tipo) {
		this.tipo = tipo;
	}
	public void setFechaHora(LocalDateTime fechaHora) {
		this.fechaHora = fechaHora;
	}
	public void setDirección(String dirección) {
		this.dirección = dirección;
	}
	public void setBebidas(int bebidas) {
		this.bebidas = bebidas;
	}
	public void setBocadillos(int bocadillos) {
		this.bocadillos = bocadillos;
	}
	public void setInvitados(int invitados) {
		this.invitados = invitados;
	}
	public void setPresMin(int presMin) {
		this.presMin = presMin;
	}
	public void setPresMax(int presMax) {
		this.presMax = presMax;
	}

	//------------ Constructores --------------
	//Constructor con todos los parámetros 
	private Fiesta(String tipo, LocalDateTime fechaHora, String dirección, int bebidas, int bocadillos, int invitados,  int presMin, int presMax) {
		this.tipo = tipo;
		this.fechaHora = fechaHora;
		this.dirección = dirección;
		this.bebidas = bebidas;
		this.bocadillos = bocadillos;
		this.invitados = invitados;
		this.presMin = presMin;
		this.presMax = presMax;
	}
	//Recibe parámetros y establce invitados en 0
	public Fiesta(String tipo, LocalDateTime fechaHora, String dirección, int bebidas, int bocadillos) {
		this.tipo = tipo;
		this.fechaHora = fechaHora;
		this.dirección = dirección;
		this.bebidas = bebidas;
		this.bocadillos = bocadillos;
		this.invitados = 0;
	}
	//Sin parámetros, asigna valorse a todos los atributos
	public Fiesta() {
		this.tipo = "Fiesta piscina";
		this.fechaHora = LocalDateTime.of(2020, Month.JANUARY, 5, 21, 15, 00);  //yyyy-MM-dd-HH-mm-ss
		this.dirección = "c/ Salsipuedes s/n";
		this.bebidas = 2;
		this.bocadillos = 8;
		this.invitados = 1;
	}
	

	

	//**************** Main **********************
	public static void main(String[] args) {
		
		//Crea e imprime fiestaCarlos
		Fiesta fiestaCarlos = new Fiesta("Dance party ", LocalDateTime.of(2014, Month.FEBRUARY, 1, 9, 30, 00), "c/ Bolilla s/n", 23, 37, 20, 120, 250);
		System.out.print(" ********** Fiesta de Carlos: ********** \n" + fiestaCarlos.consultar() + "\n");	
		fiestaCarlos.ajustaPrecio();
		System.out.println("Precio final de la fiesta de Carlos: " + fiestaCarlos.precioFiesta() + "$\n");

		//Crea e imprime fiestaPablo
		Fiesta fiestaPablo = new Fiesta("Pool party ", LocalDateTime.of(2020, Month.JANUARY, 4, 23, 30, 30), "c/ Azufre s/n", 1, 3, 5, 100, 300);
		System.out.print(" ********** Fiesta de Pablo: ********** \n" + fiestaPablo.consultar() + "\n");
		fiestaPablo.ajustaPrecio();
		System.out.println("Precio final de la fiesta de Pablo: " + fiestaPablo.precioFiesta() + "$\n");
		
		//Crea e imprime fiestaNacho
		Fiesta fiestaNacho = new Fiesta("Techno party ", LocalDateTime.of(2020, Month.FEBRUARY, 27, 12, 00, 00), "c/ Leviatán s/n", 3, 2);
		System.out.print(" ********** Fiesta de Nacho: ********** \n" + fiestaNacho.consultar() + "\n");
		fiestaNacho.ajustaPrecio();
		System.out.println("Precio final de la fiesta de Nacho: " + fiestaNacho.precioFiesta() + "$\n");

		//Crea e imprime fiestaPomares	
		Fiesta fiestaPomares = new Fiesta();
		System.out.print(" ********** Fiesta de Pomares: ********** \n" + fiestaPomares.consultar() + "\n");	
		fiestaPablo.ajustaPrecio();
		System.out.println("Precio final de la fiesta de Pomares: " + fiestaPomares.precioFiesta() + "$\n");

	}
}